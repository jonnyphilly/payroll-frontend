{"ast":null,"code":"var _jsxFileName = \"/Users/jonphillips/Desktop/tanda/react/adnat-react/frontend/src/components/Shifts.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nconst baseAPI = \"http://localhost:3000\";\n\nclass Shifts extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shifts: [],\n      sessionId: this.props.location.state.sessionId,\n      user: this.props.location.state.user,\n      users: []\n    }; // BINDING GOES HERE\n\n    this.fetchShifts = this.fetchShifts.bind(this);\n  }\n\n  fetchShifts() {\n    console.log('fetching shifts');\n\n    if (this.props.location.state) {\n      const sessionId = this.props.location.state.sessionId;\n      this.setState({\n        sessionId\n      });\n      axios.get(baseAPI + \"/shifts\", {\n        headers: {\n          'Authorization': this.state.sessionId\n        }\n      }).then(response => {\n        console.log(response);\n        this.setState({\n          shifts: response.data\n        });\n        console.log('fetching users');\n        return axios.get(baseAPI + \"/users\", {\n          headers: {\n            'Authorization': this.state.sessionId\n          }\n        }).then(response => {\n          console.log(response);\n          this.setState({\n            users: response.data\n          });\n        });\n      });\n    }\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    console.log('adding shift');\n    const id = this.state.user.id;\n    axios.post(baseAPI + \"/shifts\", {\n      userId: id,\n      start: event.target.date.value + ' ' + event.target.start.value,\n      finish: event.target.date.value + ' ' + event.target.finish.value,\n      breakLength: event.target.break.value\n    }, {\n      headers: {\n        'Authorization': this.props.location.state.sessionId\n      }\n    }).then(this.fetchShifts());\n    console.log('shift added');\n  }\n\n  componentDidMount() {\n    this.fetchShifts();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"shifts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Logged in as \", this.props.location.state.user.name, \".\", React.createElement(\"button\", {\n      onClick: this.props.handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Log out\")), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, this.props.location.state.organisation.name), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \" Shifts \"), React.createElement(\"table\", {\n      border: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \" Employee name \"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \" Shift date \"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \" Start time \"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \" Finish time \"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \" Break length (minutes) \"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \" Hours worked \"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \" Shift cost \"))), this.state.shifts > 0 && React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, this.state.shifts.map((shift, index) => {\n      const userLine = this.state.users.find(user => user.id === shift.userId);\n      const start = new Date(shift.start);\n      const finish = new Date(shift.finish);\n      const hour = 1000 * 60 * 60;\n      const time = (finish.getTime() - start.getTime() - shift.breakLength * 1000 * 60) / hour;\n      return React.createElement(\"tr\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \" \", userLine ? userLine.name : '', \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \" \", start, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \" \", start.toLocaleString('en-US', {\n        hour: 'numeric',\n        minute: 'numeric',\n        hour12: true\n      }), \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \" \", finish.toLocaleString('en-US', {\n        hour: 'numeric',\n        minute: 'numeric',\n        hour12: true\n      }), \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \" \", shift.breakLength, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \" \", time, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \" \", new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD'\n      }).format(time * this.props.location.state.organisation.hourlyRate)));\n    }))), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \" Add Shift \"), React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Shift date:\"), React.createElement(\"input\", {\n      type: \"date\",\n      name: \"date\",\n      id: \"date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Start time:\"), React.createElement(\"input\", {\n      type: \"time\",\n      name: \"start\",\n      id: \"start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"finish\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Finish time:\"), React.createElement(\"input\", {\n      type: \"time\",\n      name: \"finish\",\n      id: \"finish\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"Break length (minutes)\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Break length (minutes)\"), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"break\",\n      id: \"break\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Submit\")));\n  }\n\n}\n\nexport default Shifts;","map":{"version":3,"sources":["/Users/jonphillips/Desktop/tanda/react/adnat-react/frontend/src/components/Shifts.js"],"names":["React","Component","axios","baseAPI","Shifts","constructor","props","state","shifts","sessionId","location","user","users","fetchShifts","bind","console","log","setState","get","headers","then","response","data","handleSubmit","event","preventDefault","id","post","userId","start","target","date","value","finish","breakLength","break","componentDidMount","render","name","handleLogout","organisation","map","shift","index","userLine","find","Date","hour","time","getTime","toLocaleString","minute","hour12","Intl","NumberFormat","style","currency","format","hourlyRate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nconst baseAPI = `http://localhost:3000`;\n\nclass Shifts extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      shifts: [],\n      sessionId: this.props.location.state.sessionId,\n      user: this.props.location.state.user,\n      users: []\n    }\n    // BINDING GOES HERE\n    this.fetchShifts = this.fetchShifts.bind(this)\n  }\n\n  fetchShifts() {\n    console.log('fetching shifts')\n    if(this.props.location.state) {\n      const { sessionId } = this.props.location.state\n      this.setState({ sessionId })\n      axios.get(baseAPI + `/shifts`, {\n        headers: {\n          'Authorization': this.state.sessionId\n        }\n      })\n      .then(response => {\n        console.log(response)\n        this.setState({\n          shifts: response.data\n        })\n        console.log('fetching users')\n        return axios.get(baseAPI + `/users`, {\n          headers: {\n            'Authorization': this.state.sessionId\n          }\n        })\n        .then(response => {\n          console.log(response)\n          this.setState({\n            users: response.data\n          })\n        })\n      })\n    }\n  }\n\n  handleSubmit(event) {\n    event.preventDefault()\n    console.log('adding shift')\n    const { user: { id }} = this.state\n    axios.post(baseAPI + `/shifts`, {\n      userId: id,\n      start: event.target.date.value + ' ' + event.target.start.value,\n      finish: event.target.date.value + ' ' + event.target.finish.value,\n      breakLength: event.target.break.value\n    }, {\n      headers: {\n        'Authorization': this.props.location.state.sessionId\n      }\n    })\n    .then(\n      this.fetchShifts(),\n    )\n    console.log('shift added')\n  }\n\n  componentDidMount() {\n    this.fetchShifts()\n  }\n\n  render() {\n    return(\n      <div className='shifts'>\n        <p>\n          Logged in as {this.props.location.state.user.name}.\n          <button onClick={this.props.handleLogout}>\n            Log out\n          </button>\n        </p>\n\n        <h2>{this.props.location.state.organisation.name}</h2>\n\n        <h4> Shifts </h4>\n        <table border='1'>\n          <thead>\n            <tr>\n              <th> Employee name </th>\n              <th> Shift date </th>\n              <th> Start time </th>\n              <th> Finish time </th>\n              <th> Break length (minutes) </th>\n              <th> Hours worked </th>\n              <th> Shift cost </th>\n            </tr>\n          </thead>\n          { this.state.shifts > 0 &&\n            <tbody>\n            { this.state.shifts.map((shift, index) => {\n              const userLine = this.state.users.find(user => user.id === shift.userId)\n              const start = new Date(shift.start)\n              const finish = new Date(shift.finish)\n              const hour = 1000 * 60 * 60\n              const time = ((finish.getTime() - (start.getTime()) - (shift.breakLength * 1000 * 60))) / hour\n              return (\n                <tr key={index}>\n                  <td> {userLine ? userLine.name : ''} </td>\n                  <td> {start} </td>\n                  <td> {start.toLocaleString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true })} </td>\n                  <td> {finish.toLocaleString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true })} </td>\n                  <td> {shift.breakLength} </td>\n                  <td> {time} </td>\n                  <td> {new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD'}).format(time * this.props.location.state.organisation.hourlyRate)}</td>\n                </tr>\n              )\n            })}\n            </tbody>\n          }\n        </table>\n\n        <h4> Add Shift </h4>\n        <form onSubmit={this.handleSubmit}>\n          <label htmlFor=\"date\">\n            Shift date:\n          </label>\n          <input\n            type=\"date\"\n            name=\"date\"\n            id=\"date\"\n          />\n          <br />\n          <label htmlFor=\"start\">\n            Start time:\n          </label>\n          <input\n            type=\"time\"\n            name=\"start\"\n            id=\"start\"\n          />\n          <br />\n          <label htmlFor=\"finish\">\n            Finish time:\n          </label>\n          <input\n            type=\"time\"\n            name=\"finish\"\n            id=\"finish\"\n          />\n          <br />\n          <label htmlFor=\"Break length (minutes)\">\n            Break length (minutes)\n          </label>\n          <input\n            type=\"text\"\n            name=\"break\"\n            id=\"break\"\n          />\n          <br />\n          <button type=\"submit\">\n            Submit\n          </button>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default Shifts;\n"]},"metadata":{},"sourceType":"module"}