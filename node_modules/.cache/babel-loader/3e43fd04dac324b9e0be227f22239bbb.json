{"ast":null,"code":"var _jsxFileName = \"/Users/jonphillips/Desktop/tanda/react/adnat-react/frontend/src/components/Shifts.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Shift from './Shift';\nconst baseAPI = \"http://localhost:3000\";\n\nclass Shifts extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shifts: [],\n      sessionId: this.props.location.state.sessionId,\n      user: this.props.location.state.user,\n      users: []\n    }; // BINDING GOES HERE\n\n    this.fetchShifts = this.fetchShifts.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  fetchShifts() {\n    console.log('fetching shifts');\n\n    if (this.props.location.state) {\n      const sessionId = this.props.location.state.sessionId;\n      this.setState({\n        sessionId\n      });\n      axios.get(baseAPI + \"/shifts\", {\n        headers: {\n          'Authorization': this.state.sessionId\n        }\n      }).then(response => {\n        console.log(response);\n        this.setState({\n          shifts: response.data\n        });\n        console.log('fetching users');\n        return axios.get(baseAPI + \"/users\", {\n          headers: {\n            'Authorization': this.state.sessionId\n          }\n        }).then(response => {\n          console.log(response);\n          this.setState({\n            users: response.data\n          });\n        });\n      });\n    }\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    console.log('adding shift');\n    const id = this.state.user.id;\n    axios.post(baseAPI + \"/shifts\", {\n      userId: id,\n      start: event.target.date.value + ' ' + event.target.start.value,\n      finish: event.target.date.value + ' ' + event.target.finish.value,\n      breakLength: event.target.break.value\n    }, {\n      headers: {\n        'Authorization': this.props.location.state.sessionId\n      }\n    }).then(this.fetchShifts());\n    console.log('shift added');\n  }\n\n  componentDidMount() {\n    this.fetchShifts();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"shifts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Logged in as \", this.props.location.state.user.name, \".\", React.createElement(\"button\", {\n      onClick: this.props.handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Log out\")), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, this.props.location.state.organisation.name), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \" Shifts \"), React.createElement(\"table\", {\n      border: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \" Employee name \"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \" Shift date \"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \" Start time \"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \" Finish time \"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \" Break length (minutes) \"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \" Hours worked \"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \" Shift cost \"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, this.state.shifts.map((shift, index) => {\n      return React.createElement(Shift, {\n        key: index,\n        users: this.state.users,\n        shift: shift,\n        organisation: this.props.location.state.organisation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      });\n    })), \"}\"), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \" Add Shift \"), React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Shift date:\"), React.createElement(\"input\", {\n      type: \"date\",\n      name: \"date\",\n      id: \"date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Start time:\"), React.createElement(\"input\", {\n      type: \"time\",\n      name: \"start\",\n      id: \"start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"finish\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Finish time:\"), React.createElement(\"input\", {\n      type: \"time\",\n      name: \"finish\",\n      id: \"finish\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"Break length (minutes)\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Break length (minutes)\"), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"break\",\n      id: \"break\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"Submit\")));\n  }\n\n}\n\nexport default Shifts;","map":{"version":3,"sources":["/Users/jonphillips/Desktop/tanda/react/adnat-react/frontend/src/components/Shifts.js"],"names":["React","Component","axios","Shift","baseAPI","Shifts","constructor","props","state","shifts","sessionId","location","user","users","fetchShifts","bind","handleSubmit","console","log","setState","get","headers","then","response","data","event","preventDefault","id","post","userId","start","target","date","value","finish","breakLength","break","componentDidMount","render","name","handleLogout","organisation","map","shift","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Shift from './Shift';\n\nconst baseAPI = `http://localhost:3000`;\n\nclass Shifts extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      shifts: [],\n      sessionId: this.props.location.state.sessionId,\n      user: this.props.location.state.user,\n      users: []\n    }\n    // BINDING GOES HERE\n    this.fetchShifts = this.fetchShifts.bind(this)\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n\n  fetchShifts() {\n    console.log('fetching shifts')\n    if(this.props.location.state) {\n      const { sessionId } = this.props.location.state\n      this.setState({ sessionId })\n      axios.get(baseAPI + `/shifts`, {\n        headers: {\n          'Authorization': this.state.sessionId\n        }\n      })\n      .then(response => {\n        console.log(response)\n        this.setState({\n          shifts: response.data\n        })\n        console.log('fetching users')\n        return axios.get(baseAPI + `/users`, {\n          headers: {\n            'Authorization': this.state.sessionId\n          }\n        })\n        .then(response => {\n          console.log(response)\n          this.setState({\n            users: response.data\n          })\n        })\n      })\n    }\n  }\n\n  handleSubmit(event) {\n    event.preventDefault()\n    console.log('adding shift')\n    const { user: { id }} = this.state\n    axios.post(baseAPI + `/shifts`, {\n      userId: id,\n      start: event.target.date.value + ' ' + event.target.start.value,\n      finish: event.target.date.value + ' ' + event.target.finish.value,\n      breakLength: event.target.break.value\n    }, {\n      headers: {\n        'Authorization': this.props.location.state.sessionId\n      }\n    })\n    .then(\n      this.fetchShifts(),\n    )\n    console.log('shift added')\n  }\n\n  componentDidMount() {\n    this.fetchShifts()\n  }\n\n  render() {\n    return(\n      <div className='shifts'>\n        <p>\n          Logged in as {this.props.location.state.user.name}.\n          <button onClick={this.props.handleLogout}>\n            Log out\n          </button>\n        </p>\n\n        <h2>{this.props.location.state.organisation.name}</h2>\n\n        <h4> Shifts </h4>\n        <table border='1'>\n          <thead>\n            <tr>\n              <th> Employee name </th>\n              <th> Shift date </th>\n              <th> Start time </th>\n              <th> Finish time </th>\n              <th> Break length (minutes) </th>\n              <th> Hours worked </th>\n              <th> Shift cost </th>\n            </tr>\n          </thead>\n          <tbody>\n          { this.state.shifts.map((shift, index) => {\n            return(\n              <Shift\n                key={index}\n                users={this.state.users}\n                shift={shift}\n                organisation={this.props.location.state.organisation}\n              />\n            )\n          })}\n          </tbody>\n          }\n        </table>\n\n        <h4> Add Shift </h4>\n        <form onSubmit={this.handleSubmit}>\n          <label htmlFor=\"date\">\n            Shift date:\n          </label>\n          <input\n            type=\"date\"\n            name=\"date\"\n            id=\"date\"\n          />\n          <br />\n          <label htmlFor=\"start\">\n            Start time:\n          </label>\n          <input\n            type=\"time\"\n            name=\"start\"\n            id=\"start\"\n          />\n          <br />\n          <label htmlFor=\"finish\">\n            Finish time:\n          </label>\n          <input\n            type=\"time\"\n            name=\"finish\"\n            id=\"finish\"\n          />\n          <br />\n          <label htmlFor=\"Break length (minutes)\">\n            Break length (minutes)\n          </label>\n          <input\n            type=\"text\"\n            name=\"break\"\n            id=\"break\"\n          />\n          <br />\n          <button type=\"submit\">\n            Submit\n          </button>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default Shifts;\n"]},"metadata":{},"sourceType":"module"}