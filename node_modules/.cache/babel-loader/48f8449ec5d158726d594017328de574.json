{"ast":null,"code":"var _jsxFileName = \"/Users/jonphillips/Desktop/tanda/react/adnat-react/frontend/src/components/Home.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport Organisations from './Organisations';\nimport Header from './Header';\nimport Body from './Body';\nimport CreateOrganisation from './CreateOrganisation';\nimport MyOrgaisations from './MyOrganisations';\nconst baseAPI = \"http://localhost:3000\";\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: {},\n      organisations: [],\n      organisation: {},\n      sessionId: ''\n    }; // BINDING GOES HERE\n\n    this.fetchUser = this.fetchUser.bind(this);\n    this.handleLogout = this.handleLogout.bind(this);\n    this.fetchOrganisations = this.fetchOrganisations.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleLeave = this.handleLeave.bind(this);\n  }\n\n  fetchUser() {\n    if (this.props.location.state) {\n      const sessionId = this.props.location.state.sessionId;\n      this.setState({\n        sessionId\n      });\n      const headers = {\n        'Authorization': sessionId\n      };\n      axios.get(baseAPI + \"/users/me\", {\n        headers\n      }).then(response => {\n        this.setState({\n          user: response.data\n        }); // console.log(this.state.user)\n      });\n    } else {\n      this.props.history.push({\n        pathname: '/'\n      });\n    }\n  }\n\n  handleLogout() {\n    console.log('logging out');\n    axios.delete(baseAPI + \"/auth/logout\", {\n      headers: {\n        'Authorization': this.state.sessionId\n      }\n    }).then(response => {\n      if (response.status === 200) {\n        this.setState({\n          user: {},\n          organisations: [],\n          organisation: {},\n          sessionId: ''\n        });\n        alert(\"Logged out successfully!\");\n        this.props.history.push({\n          pathname: '/'\n        });\n      }\n    });\n  }\n\n  fetchOrganisations() {\n    console.log('fetching organisations');\n\n    if (this.props.location.state) {\n      const sessionId = this.props.location.state.sessionId;\n      this.setState({\n        sessionId\n      });\n      const headers = {\n        'Authorization': sessionId\n      };\n      axios.get(baseAPI + \"/organisations\", {\n        headers\n      }).then(response => {\n        const user = this.state.user;\n        const organisation = response.data.find(organisation => organisation.id === user.organisationId);\n        console.log(organisation);\n        this.setState({\n          organisations: response.data,\n          organisation\n        });\n        this.props.history.push(\"/home\");\n      });\n    }\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    console.log('creating and joining organisation');\n    const sessionId = this.state.sessionId;\n    const headers = {\n      'Authorization': sessionId\n    };\n    axios.post(baseAPI + \"/organisations/create_join\", {\n      name: event.target.name.value,\n      hourlyRate: event.target.rate.value\n    }, {\n      headers\n    }).then(this.fetchOrganisations());\n    console.log('organisation created and joined');\n  }\n\n  handleLeave() {\n    console.log('leaving organisation');\n    axios.post(baseAPI + \"/organisations/leave\", null, {\n      headers: {\n        'Authorization': this.state.sessionId\n      }\n    }).then(response => {\n      console.log(response);\n      console.log('organisation left');\n    }).then(this.setState({\n      organisation: {}\n    }));\n    this.props.history.push(\"/home\");\n  }\n\n  componentDidMount() {\n    this.fetchUser();\n    this.fetchOrganisations();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(Header, {\n      user: this.state.user,\n      organisations: this.state.organisations,\n      organisation: this.state.organisation,\n      sessionId: this.state.sessionId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(Body, {\n      user: this.state.user,\n      organisations: this.state.organisations,\n      organisation: this.state.organisation,\n      sessionId: this.state.sessionId,\n      handleLogout: this.handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), this.state.organisations.length > 0 ? React.createElement(Organisations, {\n      organisations: this.state.organisations,\n      user: this.state.user,\n      sessionId: this.state.sessionId,\n      handleLogout: this.handleLogout,\n      organisation: this.state.organisation,\n      fetchUser: this.fetchUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }) : React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \" \"), React.createElement(CreateOrganisation, {\n      user: this.state.user,\n      organisations: this.state.organisations,\n      organisation: this.state.organisation,\n      sessionId: this.state.sessionId,\n      handleSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, this.state.user.organisationId ? React.createElement(\"div\", {\n      className: \"my-organisation\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, this.state.organisation.name), React.createElement(Link, {\n      to: {\n        pathname: \"/shifts\",\n        state: {\n          organisation: this.state.organisation,\n          user: this.state.user,\n          sessionId: this.state.sessionId\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"View Shifts\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"  |  \"), React.createElement(Link, {\n      to: {\n        pathname: \"/edit\",\n        state: {\n          organisation: this.state.organisation,\n          user: this.state.user,\n          sessionId: this.state.sessionId\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Edit\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"  |  \"), React.createElement(Link, {\n      to: \"/home\",\n      onClick: this.handleLeave,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"Leave\")) : React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \" \")));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/jonphillips/Desktop/tanda/react/adnat-react/frontend/src/components/Home.js"],"names":["React","Component","axios","Link","Organisations","Header","Body","CreateOrganisation","MyOrgaisations","baseAPI","Home","constructor","props","state","user","organisations","organisation","sessionId","fetchUser","bind","handleLogout","fetchOrganisations","handleSubmit","handleLeave","location","setState","headers","get","then","response","data","history","push","pathname","console","log","delete","status","alert","find","id","organisationId","event","preventDefault","post","name","target","value","hourlyRate","rate","componentDidMount","render","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n\nimport Organisations from './Organisations';\nimport Header from './Header';\nimport Body from './Body';\nimport CreateOrganisation from './CreateOrganisation';\nimport MyOrgaisations from './MyOrganisations';\n\nconst baseAPI = `http://localhost:3000`;\n\nclass Home extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      user: {},\n      organisations: [],\n      organisation: {},\n      sessionId: ''\n    }\n    // BINDING GOES HERE\n    this.fetchUser = this.fetchUser.bind(this)\n    this.handleLogout = this.handleLogout.bind(this)\n    this.fetchOrganisations = this.fetchOrganisations.bind(this)\n    this.handleSubmit = this.handleSubmit.bind(this)\n    this.handleLeave = this.handleLeave.bind(this)\n  }\n\n  fetchUser() {\n    if(this.props.location.state) {\n      const { sessionId } = this.props.location.state\n      this.setState({ sessionId })\n      const headers = { 'Authorization': sessionId }\n      axios.get(baseAPI + `/users/me`, { headers })\n        .then(response => {\n          this.setState({ user: response.data })\n          // console.log(this.state.user)\n        })\n    }\n    else {\n      this.props.history.push({\n        pathname: '/'\n      })\n    }\n  }\n\n  handleLogout() {\n    console.log('logging out')\n    axios.delete(baseAPI + `/auth/logout`, {\n      headers: {\n        'Authorization': this.state.sessionId\n      }\n    })\n    .then(response => {\n      if(response.status === 200) {\n        this.setState({\n          user: {},\n          organisations: [],\n          organisation: {},\n          sessionId: ''\n        })\n        alert(\"Logged out successfully!\")\n        this.props.history.push({\n          pathname: '/'\n        })\n      }\n    })\n  }\n\n  fetchOrganisations() {\n    console.log('fetching organisations')\n    if(this.props.location.state) {\n      const { sessionId } = this.props.location.state\n      this.setState({ sessionId })\n      const headers = { 'Authorization': sessionId }\n      axios.get(baseAPI + `/organisations`, { headers })\n      .then(response => {\n        const { user } = this.state\n        const organisation = response.data.find(organisation => organisation.id === user.organisationId)\n        console.log(organisation)\n        this.setState({\n          organisations: response.data, organisation\n        })\n        this.props.history.push(`/home`)\n      })\n    }\n  }\n\n  handleSubmit(event) {\n    event.preventDefault()\n    console.log('creating and joining organisation')\n    const { sessionId } = this.state\n    const headers = { 'Authorization': sessionId }\n    axios.post(baseAPI + `/organisations/create_join`, {\n      name: event.target.name.value,\n      hourlyRate: event.target.rate.value\n    },\n    { headers })\n    .then(\n      this.fetchOrganisations(),\n    )\n    console.log('organisation created and joined')\n  }\n\n  handleLeave() {\n    console.log('leaving organisation')\n    axios.post(baseAPI + `/organisations/leave`, null, { headers: { 'Authorization': this.state.sessionId } })\n    .then(response => {\n      console.log(response)\n      console.log('organisation left')\n    })\n    .then(\n      this.setState({\n        organisation: {}\n      })\n    )\n    this.props.history.push(`/home`)\n  }\n\n  componentDidMount() {\n    this.fetchUser()\n    this.fetchOrganisations()\n  }\n\n  render() {\n    return(\n      <div className='container'>\n        <Header\n          user={this.state.user}\n          organisations={this.state.organisations}\n          organisation={this.state.organisation}\n          sessionId={this.state.sessionId}\n        />\n        <Body\n          user={this.state.user}\n          organisations={this.state.organisations}\n          organisation={this.state.organisation}\n          sessionId={this.state.sessionId}\n          handleLogout={this.handleLogout}\n        />\n        {\n          this.state.organisations.length > 0\n          ?\n          <Organisations\n            organisations={this.state.organisations}\n            user={this.state.user}\n            sessionId={this.state.sessionId}\n            handleLogout={this.handleLogout}\n            organisation={this.state.organisation}\n            fetchUser={this.fetchUser}\n          />\n          :\n          <span> </span>\n        }\n        <CreateOrganisation\n          user={this.state.user}\n          organisations={this.state.organisations}\n          organisation={this.state.organisation}\n          sessionId={this.state.sessionId}\n          handleSubmit={this.handleSubmit}\n        />\n          <React.Fragment>\n            {\n              this.state.user.organisationId\n              ?\n              <div className=\"my-organisation\">\n                <h3>\n                  {this.state.organisation.name}\n                </h3>\n                <Link to={{\n                  pathname: `/shifts`,\n                  state: {\n                    organisation: this.state.organisation,\n                    user: this.state.user,\n                    sessionId: this.state.sessionId\n                  }\n                }}>\n                  View Shifts\n                </Link>\n                <span>  |  </span>\n                <Link to={{\n                  pathname: `/edit`,\n                  state: {\n                    organisation: this.state.organisation,\n                    user: this.state.user,\n                    sessionId: this.state.sessionId }\n                  }}>\n                  Edit\n                </Link>\n                <span>  |  </span>\n                <Link\n                  to='/home'\n                  onClick={this.handleLeave}\n                >\n                  Leave\n                </Link>\n              </div>\n              : <span> </span>\n            }\n          </React.Fragment>\n\n      </div>\n    )\n  }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}